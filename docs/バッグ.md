# バックエンド要件定義

## 1. ユーザ認証
### 機能概要
- ユーザのメールアドレスとパスワードを使用して認証を行う。
- 認証に成功した場合、セッションを開始し、トークンを発行する。

### 必要な情報
- メールアドレス
- パスワード

### フロー
```mermaid
sequenceDiagram
    participant User
    participant Frontend
    participant Backend
    participant Database

    User ->> Frontend: メールアドレスとパスワードを入力
    Frontend ->> Backend: 認証リクエストを送信
    Backend ->> Database: メールアドレスとパスワードを確認
    Database -->> Backend: 認証結果を返す
    Backend -->> Frontend: セッショントークンを返す
    Frontend -->> User: ログイン成功メッセージを表示

sequenceDiagram
    participant User
    participant Frontend
    participant Backend
    participant Supabase

    User ->> Frontend: 支出データを入力
    Frontend ->> Backend: 支出データを送信
    Backend ->> Supabase: 支出データを保存
    Supabase -->> Backend: 保存結果を返す
    Backend -->> Frontend: 保存成功メッセージを返す
    Frontend -->> User: 保存成功メッセージを表示

sequenceDiagram
    participant User
    participant Frontend
    participant Backend
    participant Database

    User ->> Frontend: 使用用途を入力
    Frontend ->> Backend: 使用用途データを送信
    Backend ->> Database: 使用用途データを保存
    Database -->> Backend: 保存結果を返す
    Backend -->> Frontend: 保存成功メッセージを返す
    Frontend -->> User: 保存成功メッセージを表示

sequenceDiagram
    participant User
    participant Frontend
    participant Backend
    participant Database

    User ->> Frontend: 日付を入力
    Frontend ->> Backend: 日付データを送信
    Backend ->> Database: 日付データを保存
    Database -->> Backend: 保存結果を返す
    Backend -->> Frontend: 保存成功メッセージを返す
    Frontend -->> User: 保存成功メッセージを表示

sequenceDiagram
    participant User
    participant Frontend
    participant Backend
    participant Database

    User ->> Frontend: 視覚化リクエストを送信
    Frontend ->> Backend: 視覚化リクエストを送信
    Backend ->> Database: 支出データを取得
    Database -->> Backend: 支出データを返す
    Backend ->> Frontend: 視覚化データを返す
    Frontend -->> User: グラフを表示

graph TD;
    A[ユーザ認証] --> B[支出データの保存]
    B --> C[使用用途の管理]
    C --> D[日付の管理]
    D --> E[データの視覚化]
